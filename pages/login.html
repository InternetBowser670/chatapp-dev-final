<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>
    <link rel="stylesheet" href="/styles/main" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
  </head>
  <body>
    <!-- Lol - Finn -->
    <div class="styleDiv centered blackGlow">
      <h1>Convoes - Login</h1>
      <form id="form">
        <input
          type="text"
          placeholder="Username"
          name="username"
          id="username"
        />
        <br />
        <input
          type="password"
          placeholder="Password"
          name="password"
          id="password"
        />
        <br />
        <input type="submit" name="submit" value="login" />
      </form>
    </div>
    <script src="static/submit.js"></script>
    <script>
      // Function to fetch and apply colors on page load
      async function applySavedColors() {
        try {
          const response = await fetch('/get-colors', {
            method: 'GET',
            headers: {
              'Content-Type': 'application/json'
            }
          });
    
          if (response.ok) {
            const colors = await response.json();
            const color1 = colors.color1 || '#1c0166';  // Default color1 if not set
            const color2 = colors.color2 || '#100038';  // Default color2 if not set
    
            // Apply the colors as a gradient to the page's background
            document.documentElement.style.backgroundImage = `linear-gradient(${color1}, ${color2})`;
          } else {
            console.error('Failed to fetch colors.');
          }
        } catch (error) {
          console.error('Error fetching colors:', error);
        }
      }
    
      // Run the function when the page loads
      window.addEventListener('load', applySavedColors);
    </script>
  </body>
</html>
